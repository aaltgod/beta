# beta

Простой прокси для использования на Attack/Defense соревнованиях.

### [English](https://github.com/aaltgod/beta/blob/master/README.md) | Русский

## Описание

- Перенаправляет трафик на указанный адрес сервиса (предполагается, что он запатчен);
- Аккуратно подменяет флаги в трафике, чтобы у чекера статус был `ОК`, а у запатченного сервиса - dummy флаги.

Функциональность графически представлена ниже:

![alt text](/docs/scheme.svg)

## Запуск

- Настройте файл `.env`;
- Настройте файл `config.yaml`. Например, если порт сервиса `5005`, а патченный сервис находится по адресу `10.136.179.132`, то строка конфигурации должна выглядеть так:

```yml
- { team_host: 10.136.179.132, port: 5005 }
```

- Настройте перенаправление трафика на `beta` с указанного порта. Например, если вам нужно перенаправить трафик с порта `5005` с помощью iptables, вам нужно будет написать:

```sh
iptables -t nat -A PREROUTING -p tcp --dport 5005 -j REDIRECT --to-port 29220
```

где `29220` — это порт по умолчанию для `beta`;

- Запустите `docker compose up --build -d`.
